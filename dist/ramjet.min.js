!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ramjet=e()}(this,function(){"use strict";function t(e){var n,i,o,r,a;if(i=e.cloneNode(),1===e.nodeType){for(n=window.getComputedStyle(e),m.forEach(function(t){i.style[t]=n[t]}),o=e.attributes.length,r=0;o>r;r+=1)a=e.attributes[r],i.setAttribute(a.name,a.value);for(o=e.childNodes.length,r=0;o>r;r+=1)i.appendChild(t(e.childNodes[r]))}return i}function e(e){var n,i,o,r,a,s,l,c;o=e.getBoundingClientRect(),i=window.getComputedStyle(e),r=e.cloneNode(),m.forEach(function(t){r.style[t]=i[t]});var d=e.offsetParent,u=window.getComputedStyle(d),f=d.getBoundingClientRect();for(r.style.position="absolute",r.style.top=o.top-parseInt(i.marginTop,10)-(f.top-parseInt(u.marginTop,10))+"px",r.style.left=o.left-parseInt(i.marginLeft,10)-(f.left-parseInt(u.marginLeft,10))+"px",s=e.childNodes.length,a=0;s>a;a+=1)l=t(e.childNodes[a]),r.appendChild(l);return n={node:e,bcr:o,clone:r,cx:(o.left+o.right)/2,cy:(o.top+o.bottom)/2,width:o.right-o.left,height:o.bottom-o.top,isSvg:e.namespaceURI===y},n.isSvg?(c=e.getScreenCTM(),n.transform="matrix("+[c.a,c.b,c.c,c.d,c.e,c.f].join(",")+")",h.appendChild(r)):(n.transform="",e.parentNode.appendChild(r)),n}function n(t){t.__ramjetOriginalTransition__=t.style.transition,t.style.transition="",t.style.opacity=0}function i(t){t.style.transition="",t.style.opacity=1,t.__ramjetOriginalTransition__&&setTimeout(function(){t.style.transition=t.__ramjetOriginalTransition__})}function o(t,e,n,i,o,r,a,s){var l=t?"translate("+e+" "+n+") scale("+(1+s*r)+" "+(1+s*a)+") translate("+-e+" "+-n+") translate("+s*i+" "+s*o+")":"translate("+s*i+"px,"+s*o+"px) scale("+(1+s*r)+","+(1+s*a)+")";return l}function r(t){return t}function a(t){return Math.pow(t,3)}function s(t){return Math.pow(t-1,3)+1}function l(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}function c(t){var e=document.createElement("style");e.type="text/css";var n=document.getElementsByTagName("head")[0],i=e.styleSheet;return i?i.cssText=t:e.innerHTML=t,n.appendChild(e),function(){return n.removeChild(e)}}function d(t,e,n){var i,o=e.cx-t.cx,a=e.cy-t.cy,s=e.width/t.width-1,l=e.height/t.height-1,c=t.width/e.width-1,d=t.height/e.height-1,u=n.easing||r,f=n.duration/50,m=[],y=[];for(i=0;f>i;i+=1){var h=100*(i/f),g=u(i/f),v=t.cx+o*g,w=t.cy+a*g,b=p(t.isSvg,v,w,o,a,s,l,g)+" "+t.transform,C=p(e.isSvg,v,w,-o,-a,c,d,1-g)+" "+e.transform;m.push(""+h+"% { opacity: "+(1-g)+"; "+x+": "+b+"; }"),y.push(""+h+"% { opacity: "+g+"; "+x+": "+C+"; }")}var S=t.cx+o,T=t.cy+a,k=p(t.isSvg,S,T,o,a,s,l,1)+" "+t.transform,A=p(e.isSvg,S,T,-o,-a,c,d,0)+" "+e.transform;return m.push("100% { opacity: 0; "+x+": "+k+"; }"),y.push("100% { opacity: 1; "+x+": "+A+"; }"),m=m.join("\n"),y=y.join("\n"),{fromKeyframes:m,toKeyframes:y}}var u=["length","parentRule"],f=function(){var t;return t="undefined"!=typeof CSS2Properties?Object.keys(CSS2Properties.prototype):Object.keys(document.createElement("div").style).filter(function(t){return!~u.indexOf(t)})}(),m=f,y="http://www.w3.org/2000/svg",h=document.createElementNS(y,"svg");h.style.position="fixed",h.style.top=h.style.left="0",h.style.width=h.style.height="100%",h.style.overflow="visible",h.style.pointerEvents="none",h.setAttribute("class","mogrify-svg"),document.body.appendChild(h);var p=o,g=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,16)},v=g,w=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},b=function(t,e,n){function i(){var r,y,h,g,w,b,C;return r=Date.now(),y=r-u,y>f?(t.clone.parentNode.removeChild(t.clone),e.clone.parentNode.removeChild(e.clone),void(n.done&&n.done())):(h=m(y/f),t.clone.style.opacity=1-h,e.clone.style.opacity=h,g=t.cx+o*h,w=t.cy+a*h,b=p(t.isSvg,g,w,o,a,s,l,h)+" "+t.transform,C=p(e.isSvg,g,w,-o,-a,c,d,1-h)+" "+e.transform,t.isSvg?t.clone.setAttribute("transform",b):t.clone.style.transform=t.clone.style.webkitTransform=b,e.isSvg?e.clone.setAttribute("transform",C):e.clone.style.transform=e.clone.style.webkitTransform=C,void v(i))}w(this,b);var o=e.cx-t.cx,a=e.cy-t.cy,s=e.width/t.width-1,l=e.height/t.height-1,c=t.width/e.width-1,d=t.height/e.height-1,u=Date.now(),f=n.duration||400,m=n.easing||r;i()},C=b,S=document.createElement("div"),T=!0,x=void 0,k=void 0,A=void 0,E=void 0,N=void 0,_=void 0,j=void 0,I=void 0;("transform"in S.style||"webkitTransform"in S.style)&&("animation"in S.style||"webkitAnimation"in S.style)?(T=!0,x="transform"in S.style?"transform":"-webkit-transform","animation"in S.style?(k="@keyframes",A="animationDirection",E="animationDuration",N="animationIterationCount",_="animationName",j="animationTimingFunction",I="animationend"):(k="@-webkit-keyframes",A="webkitAnimationDirection",E="webkitAnimationDuration",N="webkitAnimationIterationCount",_="webkitAnimationName",j="webkitAnimationTimingFunction",I="webkitAnimationEnd")):T=!1;var M=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},O=function(t,e,n){function i(){m&&y&&(t.clone.parentNode.removeChild(t.clone),e.clone.parentNode.removeChild(e.clone),n.done&&n.done(),f())}M(this,O);var o=d(t,e,n),r=o.fromKeyframes,a=o.toKeyframes,s="_"+~~(1e6*Math.random()),l="_"+~~(1e6*Math.random()),u=""+k+" "+s+" { "+r+" } "+k+" "+l+" { "+a+" }",f=c(u);t.clone.style[A]="alternate",t.clone.style[E]=""+n.duration/1e3+"s",t.clone.style[N]=1,t.clone.style[_]=s,t.clone.style[j]="linear",e.clone.style[A]="alternate",e.clone.style[E]=""+n.duration/1e3+"s",e.clone.style[N]=1,e.clone.style[_]=l,e.clone.style[j]="linear";var m,y;t.clone.addEventListener(I,function(){m=!0,i()}),e.clone.addEventListener(I,function(){y=!0,i()})},D=O,L={transform:function(t,n){var i=void 0===arguments[2]?{}:arguments[2];"function"==typeof i&&(i={done:i}),"duration"in i||(i.duration=400);var o=e(t),r=e(n);return!T||i.useTimer||o.isSvg||r.isSvg?new C(o,r,i):new D(o,r,i)},hide:function(){for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i];e.forEach(n)},show:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];e.forEach(i)},linear:r,easeIn:a,easeOut:s,easeInOut:l};return L});
